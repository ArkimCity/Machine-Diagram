<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>My first three.js app</title>
    <style>
        body {
            margin: 0;
        }

        nav {
            margin-bottom: 0%;
            height: 15vh;
            background-color: rgb(255, 255, 255);
            opacity: 50%;
        }

        canvas {
            display: block;
        }
    </style>
    <script src="node_modules\three\build\three.js"></script>
    <script src="lib\OrbitControls.js"></script>
    <script src="lib\threex.domevents.js"></script>
    <script src="lib\THREE.meshLine.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<style>
    #info {
        position: absolute;
        top: 5%;
        width: 100%;
        z-index: 100;
        display: block;
        color: aliceblue;
    }
    #app {
        position: absolute;
        bottom: 5%;
        width: 100%;
        z-index: 100;
        display: block;
        color: aliceblue;
    }
</style>

<body> 
        <!-- <div id="info">
            <h2>Rotating Stars</h2><button onclick="cubeAdd()">add</button>
        </div> -->
        <!-- <script type="module"> -->
        <script src="index.js"></script>
        <script src="gridLines.js"></script>
        <script src="animate.js"></script>
    <div id="app">
        <nav>
            <div style="float: left; margin-left: 25px; width: 30%; color: rgb(8, 7, 7);"><br>
                x : <input type="number" v-model:number="x"><br>
                y : <input type="number" v-model:number="y"><br>
                z : <input type="number" v-model:number="z"><br>
                <input type="text" v-model:number="point"><br>
                <button onclick="cubeAdd([model.x, model.y, model.z])">박스 추가</button>
                <button onclick="cylAdd([model.x, model.y, model.z])">실린더 추가</button>
            </div>
            <div style="float: right; margin-right: 25px; width: 35%; color: rgb(8, 7, 7);"><br>
                선택된 박스번호 : <input type="text" v-model="boxnumber" style="width: 10%;">
                <button v-on:click="deleteCube()">삭제</button><br>
                <!-- <button v-on:click="toStartPoint()">시작점</button>
                <button v-on:click="toEndPoint()">종료점</button><br> -->
                정보 이동 <input type="number" v-model:number="startPoint" style="width: 10%;">
                to <input type="number" v-model:number="endPoint" style="width: 10%;"><br>
                <button onclick="addLine(model.startPoint, model.endPoint)">addLine!</button>
                <button onclick="shoot(model.startPoint, model.endPoint)">GO!</button><br>
                회전 컨트롤 모드 <button onclick="switchOrbitControls()">변경</button>
            </div>
        </nav>
    </div>
    <script>
        let model = {
            label: "",
            point:  "x : " +  this.x * 1 + ", y : " +  this.y * 1 + ", z : " +  this.z * 1 , 
            x:0, y:0, z:0 , 
            boxnumber: null,
            startPoint : null,
            endPoint: null
        };

        let vm = new Vue({
            el: "#app",
            data: model,
            watch: {
                x: function(){
                    this.point = "x : " +  this.x * 1 + ", y : " +  this.y * 1 + ", z : " +  this.z * 1;
                },
                y: function(){
                    this.point = "x : " +  this.x * 1 + ", y : " +  this.y * 1 + ", z : " +  this.z * 1;
                },
                z: function(){
                    this.point = "x : " +  this.x * 1 + ", y : " +  this.y * 1 + ", z : " +  this.z * 1;
                }
            },
            methods: {
                returnPoint: function(){
                    return this.point = "x : " +  this.x * 1 + ", y : " +  this.y * 1 + ", z : " +  this.z * 1;
                },
                deleteCube: function() {
                    domEvents.removeEventListener(cubes["cube" + this.boxnumber], 'mousedown', onDocumentMouseDown, false);
                    scene.remove(cubes["cube" + this.boxnumber]);
                },
                toStartPoint: function() {
                    this.startPoint = this.boxnumber
                },
                toEndPoint: function() {
                    this.endPoint = this.boxnumber
                },
            },
        })
    </script>
    <script>
        // test용
        cylAdd([10,0,10]);
        cylAdd([20,0,10]);
        cubeAdd([30,0,15]);

        cubeAdd([20,0,30]);
        cubeAdd([20,0,40]);

        setInterval(()=>{
                addLine( parseInt(Math.random()*3),parseInt(Math.random()*3 + 4))
            }, 150);

        setInterval(() => {
                removeLine();
            }, 1350);
    </script>
</body>

</html>